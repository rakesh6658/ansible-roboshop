- name: creating frontend
  hosts: frontend
  become: yes
  tasks: 
  - name: disabling nginx
    ansible.builtin.command: dnf module disable nginx -y
  - name: enabling nginx
    ansible.builtin.command: dnf module enable nginx:1.24 -y
  - name: installing nginx
    ansible.builtin.package:
     name: nginx
     state: present
  - name: starting and enabling nginx
    ansible.builtin.service:
     name: nginx
     state: started
     enabled: yes
  - name: Remove default nginx html content
    ansible.builtin.file:
     path: /usr/share/nginx/html/*
     state: absent
  - name: Download frontend artifact
    ansible.builtin.get_url:
     url: https://roboshop-artifacts.s3.amazonaws.com/frontend-v3.zip
     dest: /tmp/frontend.zip 
  - name: Extract frontend application
    ansible.builtin.unarchive:
     src: /tmp/frontend.zip
     dest: /usr/share/nginx/html 
     remote_src: yes    
  - name: copying  nginx.conf
    ansible.builtin.copy:
     src: nginx.conf
     dest: /etc/nginx/nginx.conf
  - name: restarting nginx
    ansible.builtin.service:
     name: nginx
     state: restarted         
          